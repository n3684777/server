
-	script	Identify	-1,{
	end;

function	RandomOPT	{
	.@idx = rand(getarg(1,getarraysize(getarg(0))));
	if(.@idx%2 == 0)
		return .@idx;
	else return .@idx-1;
	}
OnPCIdentifyFilter:
	processhalt;
	.@idx = @identify_idx;
	.@nameid = getinventoryinfo(.@idx,0);
	.@refine = getinventoryinfo(.@idx,3);
	.@card0 = getinventoryinfo(.@idx,6);
	.@card1 = getinventoryinfo(.@idx,7);
	.@card2 = getinventoryinfo(.@idx,8);
	.@card3 = getinventoryinfo(.@idx,9);
	delinventory @identify_idx,1;
	switch(.@nameid) {

	// 詛咒/血腥/神聖 (物傷)
	case 28942: case 28945: case 28946:
		// 第一、二洞
		setarray .@type,
		RDMOPT_VAR_ATTPOWER,rand(1,15),RDMOPT_CLASS_DAMAGE_NORMAL_TARGET,rand(1,30),RDMOPT_CLASS_DAMAGE_BOSS_TARGET,rand(1,30),RDMOPT_RACE_DAMAGE_NOTHING + rand(10),rand(1,30),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET ,rand(1,30),RDMOPT_DAMAGE_PROPERTY_WATER_TARGET,rand(1,30),RDMOPT_DAMAGE_PROPERTY_GROUND_TARGET,rand(1,30),RDMOPT_DAMAGE_PROPERTY_FIRE_TARGET,rand(1,30),RDMOPT_DAMAGE_PROPERTY_WIND_TARGET,rand(1,30),RDMOPT_DAMAGE_PROPERTY_POISON_TARGET,rand(1,30),RDMOPT_DAMAGE_PROPERTY_SAINT_TARGET,rand(1,30),RDMOPT_DAMAGE_PROPERTY_DARKNESS_TARGET,rand(1,30),RDMOPT_DAMAGE_PROPERTY_TELEKINESIS_TARGET,rand(1,30),RDMOPT_DAMAGE_SIZE_SMALL_TARGET,rand(1,30),
		RDMOPT_DAMAGE_SIZE_MIDIUM_TARGET,rand(1,30),RDMOPT_DAMAGE_SIZE_LARGE_TARGET,rand(1,30),RDMOPT_CLASS_IGNORE_DEF_PERCENT_NORMAL,rand(1,30),RDMOPT_CLASS_IGNORE_DEF_PERCENT_BOSS,rand(1,30),RDMOPT_RACE_IGNORE_DEF_PERCENT_NOTHING + rand(10),rand(1,30),RDMOPT_WEAPON_INDESTRUCTIBLE,1,RDMOPT_DAMAGE_SIZE_PERFECT,1,RDMOPT_WEAPON_ATTR_FIRE,1,RDMOPT_WEAPON_ATTR_WATER,1,RDMOPT_WEAPON_ATTR_GROUND,1,RDMOPT_WEAPON_ATTR_WIND,1,RDMOPT_WEAPON_ATTR_SAINT,1,RDMOPT_WEAPON_ATTR_DARKNESS,1;
           
		// 第三洞
		setarray .@type2
		,RDMOPT_VAR_STRAMOUNT + rand(6),rand(1,10),RDMOPT_VAR_ATTPOWER,rand(1,50),RDMOPT_VAR_ATTMPOWER,rand(1,50),RDMOPT_VAR_CRITICALSUCCESSVALUE,rand(1,20),RDMOPT_VAR_PLUSASPDPERCENT,rand(1,20),RDMOPT_RANGE_ATTACK_DAMAGE_TARGET,rand(1,20),RDMOPT_DAMAGE_CRI_TARGET,rand(1,20),RDMOPT_VAR_PLUSASPD,rand(1,5);
		setarray .@RDMOPT[0],
			.@type[.@i=RandomOPT(.@type)],
			.@i>25?.@type[.@j=RandomOPT(.@type,25)]:.@type[.@j=RandomOPT(.@type)],
			.@type2[.@k=RandomOPT(.@type2)];
			setarray .@VALUE[0],.@type[.@i+1],.@type[.@j+1],.@type2[.@k+1];
			setarray .@Param[0],0;
			getitem3 .@nameid,1,1,0,0,0,0,0,0,.@RDMOPT,.@VALUE,.@Param;
			end;
	// 緋紅武器系列 (賦予武器屬性)
	case 28705: case 13454: case 1443: case 16040: case 1839: case 1939: case 1995: case 28604: case 21015: case 1498: case 28106: case 28007: case 13327:
		setarray .@type,RDMOPT_WEAPON_ATTR_NOTHING,RDMOPT_WEAPON_ATTR_WATER,RDMOPT_WEAPON_ATTR_GROUND,RDMOPT_WEAPON_ATTR_FIRE,RDMOPT_WEAPON_ATTR_WIND,RDMOPT_WEAPON_ATTR_SAINT,RDMOPT_WEAPON_ATTR_DARKNESS;
		setarray .@RDMOPT,.@type[rand(getarraysize(.@type))];
		setarray .@VALUE,0;
		setarray .@Param,0;
		getitem3 .@nameid,1,1,0,0,0,0,0,0,.@RDMOPT[rand(getarraysize(.@RDMOPT))],.@VALUE,.@Param;
		end;
//==============================================================================================================================================================================================================================================
	// 邪惡武器系列 (物傷)
	case 28706: case 13455: case 21016: case 1400: case 1450: case 28107: case 16041: case 18121: case 28008: case 28605: case 1800: case 1900: case 1996: case 13328: case 13128:
		// 第一、二洞
		setarray .@type,
		RDMOPT_VAR_ATTPOWER,rand(1,15),RDMOPT_CLASS_DAMAGE_NORMAL_TARGET,rand(1,30),RDMOPT_CLASS_DAMAGE_BOSS_TARGET,rand(1,30),RDMOPT_RACE_DAMAGE_NOTHING + rand(10),rand(1,30),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET ,rand(1,30),RDMOPT_DAMAGE_PROPERTY_WATER_TARGET,rand(1,30),RDMOPT_DAMAGE_PROPERTY_GROUND_TARGET,rand(1,30),RDMOPT_DAMAGE_PROPERTY_FIRE_TARGET,rand(1,30),RDMOPT_DAMAGE_PROPERTY_WIND_TARGET,rand(1,30),RDMOPT_DAMAGE_PROPERTY_POISON_TARGET,rand(1,30),RDMOPT_DAMAGE_PROPERTY_SAINT_TARGET,rand(1,30),RDMOPT_DAMAGE_PROPERTY_DARKNESS_TARGET,rand(1,30),RDMOPT_DAMAGE_PROPERTY_TELEKINESIS_TARGET,rand(1,30),RDMOPT_DAMAGE_SIZE_SMALL_TARGET,rand(1,30),
		RDMOPT_DAMAGE_SIZE_MIDIUM_TARGET,rand(1,30),RDMOPT_DAMAGE_SIZE_LARGE_TARGET,rand(1,30),RDMOPT_CLASS_IGNORE_DEF_PERCENT_NORMAL,rand(1,30),RDMOPT_CLASS_IGNORE_DEF_PERCENT_BOSS,rand(1,30),RDMOPT_RACE_IGNORE_DEF_PERCENT_NOTHING + rand(10),rand(1,30),RDMOPT_WEAPON_INDESTRUCTIBLE,1,RDMOPT_DAMAGE_SIZE_PERFECT,1,RDMOPT_WEAPON_ATTR_FIRE,1,RDMOPT_WEAPON_ATTR_WATER,1,RDMOPT_WEAPON_ATTR_GROUND,1,RDMOPT_WEAPON_ATTR_WIND,1,RDMOPT_WEAPON_ATTR_SAINT,1,RDMOPT_WEAPON_ATTR_DARKNESS,1;
           
		// 第三洞
		setarray .@type2
		,RDMOPT_VAR_STRAMOUNT + rand(6),rand(1,10),RDMOPT_VAR_ATTPOWER,rand(1,50),RDMOPT_VAR_ATTMPOWER,rand(1,50),RDMOPT_VAR_CRITICALSUCCESSVALUE,rand(1,20),RDMOPT_VAR_PLUSASPDPERCENT,rand(1,20),RDMOPT_RANGE_ATTACK_DAMAGE_TARGET,rand(1,20),RDMOPT_DAMAGE_CRI_TARGET,rand(1,20),RDMOPT_VAR_PLUSASPD,rand(1,5);
		setarray .@RDMOPT[0],
			.@type[.@i=RandomOPT(.@type)],
			.@i>25?.@type[.@j=RandomOPT(.@type,25)]:.@type[.@j=RandomOPT(.@type)],
			.@type2[.@k=RandomOPT(.@type2)];
			setarray .@VALUE[0],.@type[.@i+1],.@type[.@j+1],.@type2[.@k+1];
			setarray .@Param[0],0;
			getitem3 .@nameid,1,1,0,0,0,0,0,0,.@RDMOPT,.@VALUE,.@Param;
			end;
       
		// 邪惡武器系列 (魔傷)
		case 1600: case 2026:
		// 第一、二洞
		setarray .@type,
		RDMOPT_VAR_ATTMPOWER,rand(1,10),RDMOPT_CLASS_MDAMAGE_NORMAL,rand(1,20),RDMOPT_CLASS_MDAMAGE_BOSS,rand(1,20),RDMOPT_RACE_MDAMAGE_NOTHING + rand(10),rand(1,20),RDMOPT_MDAMAGE_PROPERTY_NOTHING_TARGET ,rand(1,20),RDMOPT_MDAMAGE_PROPERTY_WATER_TARGET,rand(1,20),RDMOPT_MDAMAGE_PROPERTY_GROUND_TARGET,rand(1,20),RDMOPT_MDAMAGE_PROPERTY_FIRE_TARGET,rand(1,20),RDMOPT_MDAMAGE_PROPERTY_WIND_TARGET,rand(1,20),RDMOPT_MDAMAGE_PROPERTY_POISON_TARGET,rand(1,20),RDMOPT_MDAMAGE_PROPERTY_SAINT_TARGET,rand(1,20),RDMOPT_MDAMAGE_PROPERTY_DARKNESS_TARGET,rand(1,20),RDMOPT_MDAMAGE_PROPERTY_TELEKINESIS_TARGET,rand(1,20),RDMOPT_MDAMAGE_PROPERTY_UNDEAD_TARGET,rand(1,20),RDMOPT_CLASS_IGNORE_MDEF_PERCENT_NORMAL,rand(1,30),RDMOPT_CLASS_IGNORE_MDEF_PERCENT_BOSS,rand(1,30),RDMOPT_RACE_IGNORE_MDEF_PERCENT_NOTHING + rand(10),rand(1,30);
           
		// 第三洞
		setarray .@type2,
			RDMOPT_VAR_STRAMOUNT + rand(6),rand(1,10),RDMOPT_VAR_ATTPOWER,rand(1,50),RDMOPT_VAR_ATTMPOWER,rand(1,50),RDMOPT_VAR_CRITICALSUCCESSVALUE,rand(1,20),RDMOPT_DEC_SPELL_CAST_TIME,rand(1,20),RDMOPT_DEC_SPELL_DELAY_TIME,rand(1,20),RDMOPT_DEC_SP_CONSUMPTION,rand(1,20);
			setarray .@RDMOPT[0],
			.@type[.@i=RandomOPT(.@type)],
			.@i>25?.@type[.@j=RandomOPT(.@type,25)]:.@type[.@j=RandomOPT(.@type)],
			.@type2[.@k=RandomOPT(.@type2)];
			setarray .@VALUE[0],.@type[.@i+1],.@type[.@j+1],.@type2[.@k+1];
			setarray .@Param[0],0;
			getitem3 .@nameid,1,1,0,0,0,0,0,0,.@RDMOPT,.@VALUE,.@Param;
			end;
			}
//==============================================================================================================================================================================================================================================
		setarray .@type,RDMOPT_VAR_STRAMOUNT+ rand(6),rand(1,2),RDMOPT_VAR_STRAMOUNT+ rand(6),1,RDMOPT_VAR_STRAMOUNT+ rand(6),1;
		switch(getiteminfo(.@nameid,5)) {
		case 256: case 768:	//頭上
			setarray .@type2
				,RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3)
				,RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_VAR_ATTPOWER,rand(5,15),RDMOPT_VAR_ATTMPOWER,rand(5,15),RDMOPT_VAR_CRITICALSUCCESSVALUE,rand(1,4),RDMOPT_VAR_HITSUCCESSVALUE,rand(4,7),RDMOPT_RANGE_ATTACK_DAMAGE_TARGET,rand(1,8),RDMOPT_DAMAGE_CRI_USER,rand(1,4),RDMOPT_VAR_PLUSASPDPERCENT,rand(3,6);
				break;

		case 512:		//頭中
			setarray .@type2
				,RDMOPT_VAR_HITSUCCESSVALUE,rand(5,10),RDMOPT_VAR_CRITICALSUCCESSVALUE,rand(1,5),RDMOPT_VAR_AVOIDSUCCESSVALUE,rand(5,15),RDMOPT_VAR_MAXHPAMOUNT,rand(15,60),RDMOPT_VAR_MAXSPAMOUNT,rand(10,30),RDMOPT_VAR_MAXHPAMOUNT,rand(15,60),RDMOPT_VAR_MAXSPAMOUNT,rand(10,30),RDMOPT_VAR_MAXHPAMOUNT,rand(15,60),RDMOPT_VAR_MAXSPAMOUNT,rand(10,30);
				break;
	case 1: case 513: case 769:	//頭下
			setarray .@type2
				,RDMOPT_VAR_HITSUCCESSVALUE,rand(5,10),RDMOPT_VAR_CRITICALSUCCESSVALUE,rand(1,5),RDMOPT_VAR_AVOIDSUCCESSVALUE,rand(5,15),RDMOPT_VAR_MAXHPAMOUNT,rand(15,60),RDMOPT_VAR_MAXSPAMOUNT,rand(10,30),RDMOPT_VAR_MAXHPAMOUNT,rand(15,60),RDMOPT_VAR_MAXSPAMOUNT,rand(10,30),RDMOPT_VAR_MAXHPAMOUNT,rand(15,60),RDMOPT_VAR_MAXSPAMOUNT,rand(10,30);
				break;

		case 16:		//盔甲
			setarray .@type2
				,RDMOPT_RANGE_ATTACK_DAMAGE_USER,rand(1,5),RDMOPT_VAR_ITEMDEFPOWER,rand(15,60),RDMOPT_VAR_MDEFPOWER,rand(5,15),RDMOPT_VAR_MAXHPAMOUNT,rand(15,60),RDMOPT_VAR_MAXSPAMOUNT,rand(15,30),RDMOPT_DAMAGE_PROPERTY_NOTHING_USER+ rand(20)*2,rand(1,5),RDMOPT_RACE_TOLERACE_NOTHING+ rand(10),rand(1,5),RDMOPT_VAR_HPACCELERATION,rand(12,32),RDMOPT_VAR_SPACCELERATION,rand(12,32),RDMOPT_DAMAGE_PROPERTY_NOTHING_USER+ rand(20)*2,rand(1,5),RDMOPT_RACE_TOLERACE_NOTHING+ rand(10),rand(1,5),RDMOPT_VAR_HPACCELERATION,rand(12,32)
				,RDMOPT_VAR_SPACCELERATION,rand(12,32),RDMOPT_DAMAGE_PROPERTY_NOTHING_USER+ rand(20)*2,rand(1,5),RDMOPT_RACE_TOLERACE_NOTHING+ rand(10),rand(1,5),RDMOPT_VAR_HPACCELERATION,rand(12,32),RDMOPT_VAR_SPACCELERATION,rand(12,32),RDMOPT_DAMAGE_PROPERTY_NOTHING_USER+ rand(20)*2,rand(1,5),RDMOPT_RACE_TOLERACE_NOTHING+ rand(10),rand(1,5),RDMOPT_VAR_HPACCELERATION,rand(12,32),RDMOPT_VAR_SPACCELERATION,rand(12,32),RDMOPT_DAMAGE_PROPERTY_NOTHING_USER+ rand(20)*2,rand(1,5),RDMOPT_RACE_TOLERACE_NOTHING+ rand(10),rand(1,5),RDMOPT_VAR_HPACCELERATION,rand(12,32),RDMOPT_VAR_SPACCELERATION,rand(12,32),RDMOPT_DAMAGE_PROPERTY_NOTHING_USER+ rand(20)*2,rand(1,5),RDMOPT_RACE_TOLERACE_NOTHING+ rand(10),rand(1,5),RDMOPT_VAR_HPACCELERATION,rand(12,32),RDMOPT_VAR_SPACCELERATION,rand(12,32),RDMOPT_VAR_HPACCELERATION,rand(12,32),RDMOPT_VAR_SPACCELERATION,rand(12,32),RDMOPT_VAR_HPACCELERATION,rand(12,32),RDMOPT_VAR_SPACCELERATION,rand(12,32);
				break;


		case 2: case 34:	//武器
			setarray .@type2
				,RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,9),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,9),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,9),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,9),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,9),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,9),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,9),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,9),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,9),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,9),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,9),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,9),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,9),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,9),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,9),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,9),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,9),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,9)
				,RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,9),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,9),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,9),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,9),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,9),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,9),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,9),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,9),RDMOPT_VAR_ATTPOWER,rand(5,15),RDMOPT_VAR_ATTMPOWER,rand(5,15),RDMOPT_VAR_CRITICALSUCCESSVALUE,rand(1,4),RDMOPT_VAR_HITSUCCESSVALUE,rand(4,7),RDMOPT_RANGE_ATTACK_DAMAGE_TARGET,rand(1,9),RDMOPT_DAMAGE_CRI_USER,rand(1,9),RDMOPT_VAR_PLUSASPDPERCENT,rand(3,12),RDMOPT_DAMAGE_PROPERTY_NOTHING_USER+ rand(20)*2,rand(1,5),RDMOPT_RACE_TOLERACE_NOTHING+ rand(10),rand(1,5),RDMOPT_VAR_HPACCELERATION,rand(12,32),RDMOPT_VAR_SPACCELERATION,rand(12,32),RDMOPT_DAMAGE_PROPERTY_NOTHING_USER+ rand(20)*2,rand(1,5),RDMOPT_RACE_TOLERACE_NOTHING+ rand(10),rand(1,5),RDMOPT_VAR_HPACCELERATION,rand(12,32)
				,RDMOPT_VAR_SPACCELERATION,rand(12,32),RDMOPT_DAMAGE_PROPERTY_NOTHING_USER+ rand(20)*2,rand(1,5),RDMOPT_RACE_TOLERACE_NOTHING+ rand(10),rand(1,5),RDMOPT_VAR_HPACCELERATION,rand(12,32),RDMOPT_VAR_SPACCELERATION,rand(12,32),RDMOPT_DAMAGE_PROPERTY_NOTHING_USER+ rand(20)*2,rand(1,5),RDMOPT_RACE_TOLERACE_NOTHING+ rand(10),rand(1,5),RDMOPT_VAR_HPACCELERATION,rand(12,32),RDMOPT_VAR_SPACCELERATION,rand(12,32);
				break;

		case 32:		//盾牌
			setarray .@type2
				,RDMOPT_RANGE_ATTACK_DAMAGE_USER,rand(1,5),RDMOPT_VAR_ITEMDEFPOWER,rand(15,60),RDMOPT_VAR_MDEFPOWER,rand(10,30),RDMOPT_VAR_MAXHPAMOUNT,rand(15,60),RDMOPT_VAR_MAXSPAMOUNT,rand(15,30),RDMOPT_DAMAGE_PROPERTY_NOTHING_USER+ rand(20)*2,rand(1,5),RDMOPT_RACE_TOLERACE_NOTHING+ rand(10),rand(1,5),RDMOPT_VAR_HPACCELERATION,rand(12,32),RDMOPT_VAR_SPACCELERATION,rand(12,32),RDMOPT_DAMAGE_PROPERTY_NOTHING_USER+ rand(20)*2,rand(1,5),RDMOPT_RACE_TOLERACE_NOTHING+ rand(10),rand(1,5),RDMOPT_VAR_HPACCELERATION,rand(12,32)
				,RDMOPT_VAR_SPACCELERATION,rand(12,32),RDMOPT_DAMAGE_PROPERTY_NOTHING_USER+ rand(20)*2,rand(1,5),RDMOPT_RACE_TOLERACE_NOTHING+ rand(10),rand(1,5),RDMOPT_VAR_HPACCELERATION,rand(12,32),RDMOPT_VAR_SPACCELERATION,rand(12,32),RDMOPT_DAMAGE_PROPERTY_NOTHING_USER+ rand(20)*2,rand(1,5),RDMOPT_RACE_TOLERACE_NOTHING+ rand(10),rand(1,5),RDMOPT_VAR_HPACCELERATION,rand(12,32),RDMOPT_VAR_SPACCELERATION,rand(12,32),RDMOPT_DAMAGE_PROPERTY_NOTHING_USER+ rand(20)*2,rand(1,5),RDMOPT_RACE_TOLERACE_NOTHING+ rand(10),rand(1,5),RDMOPT_VAR_HPACCELERATION,rand(12,32),RDMOPT_VAR_SPACCELERATION,rand(12,32),RDMOPT_DAMAGE_PROPERTY_NOTHING_USER+ rand(20)*2,rand(1,5),RDMOPT_RACE_TOLERACE_NOTHING+ rand(10),rand(1,5),RDMOPT_VAR_HPACCELERATION,rand(12,32),RDMOPT_VAR_SPACCELERATION,rand(12,32),RDMOPT_VAR_HPACCELERATION,rand(12,32),RDMOPT_VAR_SPACCELERATION,rand(12,32),RDMOPT_VAR_HPACCELERATION,rand(12,32),RDMOPT_VAR_SPACCELERATION,rand(12,32);
				break;

		case 4:		//披肩
			setarray .@type2
				,RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3)
				,RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_VAR_ATTPOWER,rand(5,15),RDMOPT_VAR_ATTMPOWER,rand(5,15),RDMOPT_VAR_CRITICALSUCCESSVALUE,rand(1,4),RDMOPT_VAR_HITSUCCESSVALUE,rand(4,7),RDMOPT_RANGE_ATTACK_DAMAGE_TARGET,rand(1,6),RDMOPT_DAMAGE_CRI_USER,rand(1,3),RDMOPT_VAR_PLUSASPDPERCENT,rand(3,6);
				break;

		case 64:		//鞋子
			setarray .@type2
				,RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3)
				,RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_VAR_ATTPOWER,rand(5,15),RDMOPT_VAR_ATTMPOWER,rand(5,15),RDMOPT_VAR_CRITICALSUCCESSVALUE,rand(1,4),RDMOPT_VAR_HITSUCCESSVALUE,rand(4,7),RDMOPT_RANGE_ATTACK_DAMAGE_TARGET,rand(1,6),RDMOPT_DAMAGE_CRI_USER,rand(1,3),RDMOPT_VAR_PLUSASPDPERCENT,rand(3,6);
				break;

	case 8: case 128: case 136:	//飾品
			setarray .@type2
				,RDMOPT_VAR_ITEMDEFPOWER,rand(10,40),RDMOPT_VAR_MDEFPOWER,rand(1,5),RDMOPT_VAR_ATTPOWER,rand(5,15),RDMOPT_VAR_ATTMPOWER,rand(5,15),RDMOPT_VAR_CRITICALSUCCESSVALUE,rand(1,4),RDMOPT_VAR_HITSUCCESSVALUE,rand(1,8),RDMOPT_VAR_MAXHPAMOUNT,rand(15,60),RDMOPT_VAR_MAXSPAMOUNT,rand(5,20),RDMOPT_VAR_AVOIDSUCCESSVALUE,rand(3,12),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_RACE_DAMAGE_NOTHING+ rand(20),rand(1,3),RDMOPT_DAMAGE_PROPERTY_NOTHING_TARGET+ rand(20)*2,rand(1,3),RDMOPT_DAMAGE_CRI_TARGET,rand(1,3),RDMOPT_RANGE_ATTACK_DAMAGE_USER,rand(1,3),RDMOPT_DEC_SPELL_DELAY_TIME,rand(1,2),RDMOPT_DEC_SPELL_CAST_TIME,rand(1,2),RDMOPT_HEAL_MODIFY_PERCENT,rand(1,3),RDMOPT_HEAL_VALUE,rand(1,3);
				break;

			getitem2 .@nameid,1,1,0,0,.@card0,.@card1,.@card2,.@card3;
			end;

		}
		if (rand(1,100) >= 30) {	//30%成功率二段附加
			setarray .@RDMOPT[0],.@type[.@i=RandomOPT(.@type)];
			setarray .@VALUE[0],.@type[.@i+1];
		} else {
			setarray .@RDMOPT[0],.@type[.@i=RandomOPT(.@type)],.@type2[.@k=RandomOPT(.@type2)];
			setarray .@VALUE[0],.@type[.@i+1],.@type2[.@k+1];
			}
			setarray .@Param[0],0;
			getitem3 .@nameid,1,1,.@refine,0,.@card0,.@card1,.@card2,.@card3,.@RDMOPT,.@VALUE,.@Param;
			@RTC_Box=0;
			end;
			}